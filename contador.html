<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Contador de Euros</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 30px;
            text-align: center;
            background-color: #f3f3f3;
        }

        #contador {
            font-size: 3em;
            margin: 20px;
            color: #2e7d32;
        }

        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 1em;
            cursor: pointer;
        }

        input[type="number"] {
            padding: 10px;
            font-size: 1em;
            width: 120px;
        }

        #estado {
            margin-top: 15px;
            font-weight: bold;
            color: #555;
        }

        #btnReanudar.activo {
            background-color: #c8e6c9;
            border: 1px solid #2e7d32;
            color: #2e7d32;
        }
    </style>
</head>

<body>

    <h1>Contador </h1>
    <div id="contador">0.000 €</div>

    <button onclick="pausarContador()">Pausar</button>
    <button id="btnReanudar" onclick="reanudarContador()">Reanudar</button>
    <button onclick="limpiarContador()">Limpiar</button>

    <div style="margin-top:20px;">
        <input type="number" id="montoAgregar" step="0.001" placeholder="Añadir €">
        <button onclick="agregarDinero()">Añadir</button>
    </div>

    <div id="estado">Estado: <span id="estadoTexto">En pausa</span></div>

    <hr style="margin: 40px 0;">
    <div style="margin-top: 40px;">
    <h2>Calculadora de Ganancia</h2>

    <div style="display: flex;  align-items:center;justify-content:space-evenly; margin-bottom: 20px;">
        <div>
            <label for="diasInput">Días</label><br>
            <input type="number" id="diasInput" min="0" placeholder="0" style="width: 80px;">
            <div id="resultadoGanancia" style="margin-top: 8px; font-weight: bold;"></div>
        </div>

        <div>
            <label for="horasInput">Horas</label><br>
            <input type="number" id="horasInput" min="0" placeholder="0" style="width: 80px;">
            <div id="resultadoGananciaHoras" style="margin-top: 8px; font-weight: bold;"></div>
        </div>

        <div>
            <label for="minutosInput">Minutos</label><br>
            <input type="number" id="minutosInput" min="0" placeholder="0" style="width: 80px;">
            <div id="resultadoGananciaMinutos" style="margin-top: 8px; font-weight: bold;"></div>
        </div>
    </div>

    <button onclick="calcularTodas()" style="margin-top: 30px; background-color: #5dbe62;">Calcular</button>

    <div id="resultadoTotal" style="margin-top: 20px; font-size: 18px; font-weight: bold; color: green;"></div>
</div>

</div>



    <script>
        let valor = 0.000;
        let activo = false;
        let intervalo = null;
        const incrementoPorSegundo = 0.00221;

        let ultimoTiempo = Date.now();

        const contadorElem = document.getElementById("contador");
        const btnReanudar = document.getElementById("btnReanudar");
        const estadoTexto = document.getElementById("estadoTexto");

        // Cargar valor y estado previo
        if (localStorage.getItem("valorContador")) {
            valor = parseFloat(localStorage.getItem("valorContador"));
        }
        if (localStorage.getItem("ultimoTiempo")) {
            ultimoTiempo = parseInt(localStorage.getItem("ultimoTiempo"));
        }

        function actualizarContador() {
            contadorElem.textContent = valor.toFixed(3) + " €";
            localStorage.setItem("valorContador", valor.toFixed(3));
        }

        function actualizarEstadoVisual() {
            if (activo) {
                btnReanudar.classList.add("activo");
                btnReanudar.textContent = "En marcha";
                estadoTexto.textContent = "En marcha";
            } else {
                btnReanudar.classList.remove("activo");
                btnReanudar.textContent = "Reanudar";
                estadoTexto.textContent = "En pausa";
            }
        }

        function calcularTodas() {
    const dias = parseInt(document.getElementById("diasInput").value) || 0;
    const horas = parseInt(document.getElementById("horasInput").value) || 0;
    const minutos = parseInt(document.getElementById("minutosInput").value) || 0;

    const segundosDias = dias * 8 * 60 * 60;
    const segundosHoras = horas * 60 * 60;
    const segundosMinutos = minutos * 60;

    const gananciaDias = segundosDias * incrementoPorSegundo;
    const gananciaHoras = segundosHoras * incrementoPorSegundo;
    const gananciaMinutos = segundosMinutos * incrementoPorSegundo;

    const total = gananciaDias + gananciaHoras + gananciaMinutos;

    document.getElementById("resultadoGanancia").textContent = `Ganancia por días: ${gananciaDias.toFixed(2)} €`;
    document.getElementById("resultadoGananciaHoras").textContent = `Ganancia por horas: ${gananciaHoras.toFixed(2)} €`;
    document.getElementById("resultadoGananciaMinutos").textContent = `Ganancia por minutos: ${gananciaMinutos.toFixed(2)} €`;
    document.getElementById("resultadoTotal").textContent = `Ganancia total estimada: ${total.toFixed(2)} €`;
}


        function loop() {
            const ahora = Date.now();
            const segundosPasados = (ahora - ultimoTiempo) / 1000;
            ultimoTiempo = ahora;

            if (activo) {
                valor += incrementoPorSegundo * segundosPasados;
                actualizarContador();
            }

            localStorage.setItem("ultimoTiempo", ultimoTiempo.toString());
            requestAnimationFrame(loop); // más fiable que setInterval
        }

        function pausarContador() {
            activo = false;
            actualizarEstadoVisual();
        }

        function reanudarContador() {
            activo = true;
            ultimoTiempo = Date.now();
            actualizarEstadoVisual();
        }

        function limpiarContador() {
            pausarContador();
            valor = 0.000;
            actualizarContador();
        }

        function agregarDinero() {
            const monto = parseFloat(document.getElementById("montoAgregar").value);
            if (!isNaN(monto)) {
                valor += monto;
                actualizarContador();
                document.getElementById("montoAgregar").value = "";
            } else {
                alert("Introduce una cantidad válida.");
            }
        }

        // Guardar antes de cerrar
        window.addEventListener("beforeunload", () => {
            localStorage.setItem("valorContador", valor.toFixed(3));
            localStorage.setItem("ultimoTiempo", Date.now().toString());
        });

        actualizarContador();
        actualizarEstadoVisual();
        requestAnimationFrame(loop); // empieza la lógica

        function calcularGanancia() {
            let dias = parseInt(document.getElementById("diasInput").value);
            if (!isNaN(dias) && dias > 0) {
                let segundosTotales = dias * 60 * 60 * 8;
                let ganancia = segundosTotales * incrementoPorSegundo;
                document.getElementById("resultadoGanancia").textContent =
                    `Ganancia estimada en ${dias} día(s): ${ganancia.toFixed(2)} €`;
            } else {
                alert("Introduce un número válido de días.");
            }
        }

        function calcularGananciaHoras() {
            let horas = parseInt(document.getElementById("horasInput").value);
            if (!isNaN(horas) && horas > 0) {
                let segundosTotales = horas * 60 * 60;
                let ganancia = segundosTotales * incrementoPorSegundo;
                document.getElementById("resultadoGananciaHoras").textContent =
                    `Ganancia estimada en ${horas} hora(s): ${ganancia.toFixed(2)} €`;
            } else {
                alert("Introduce un número válido de horas.");
            }
        }

        function calcularGananciaMinutos() {
            let minutos = parseInt(document.getElementById("minutosInput").value);
            if (!isNaN(minutos) && minutos > 0) {
                let segundosTotales = minutos * 60;
                let ganancia = segundosTotales * incrementoPorSegundo;
                document.getElementById("resultadoGananciaMinutos").textContent =
                    `Ganancia estimada en ${minutos} hora(s): ${ganancia.toFixed(2)} €`;
            } else {
                alert("Introduce un número válido de minutos.");
            }
        }
    </script>


</body>

</html>